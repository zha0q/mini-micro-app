##### micro-app

1. 渲染流程
   - fetch html
   - 获取dom，解析并循环递归处理
   - 处理顺序 script link style 是否有自元素
   - 循环结束，执行元素隔离
   - 对提取的css内容进行样式隔离，将隔离后的css作为style元素插入micro-app中
   - 执行插件系统处理js文件，创建沙箱，记录全局副作用函数，代理document、window事件，将js放入沙箱运行

2. 元素隔离 MicroApp模拟实现了shadowDom类似的功能，我们拦截了底层原型链上元素的方法，保证子应用只能对自己内部的元素进行操作，每个子应用都有自己的元素作用域。

3. 插件系统：对传入静态资源进行初步处理并调用相应插件，让插件进行进一步修改

4. js沙箱通过proxy代理子应用全局对象，防止应用之间全局变量冲突

5. 预加载 基于requestIdleCallback实现，在浏览器空闲时间加载应用的静态资源，在应用真正被渲染时直接从缓存中获取资源并渲染

6. 数据通信 我们重写了micro-app元素原型链上**属性设置**的方法，在micro-app元素设置对象属性时将传递的值保存到数据中心并监听属性变化，通过数据中心将值分发给子应用。**（发布订阅）**

```

```

// TODO
7. 资源地址补全
微前端中经常出现资源丢失的现象，原因是基座应用将子应用的资源加载到自己的页面渲染，如果子应用的静态资源地址是相对地址，浏览器会以基座应用所在域名地址补全静态资源，从而导致资源丢失。
资源地址补全就是将子应用静态资源的相对地址补全为绝对地址，保证地址指向正确的资源路径，这种操作类似于webpack在运行时设置publicPath。
- 元素属性：link、img、iframe、script、a
- css规则：background、font、content